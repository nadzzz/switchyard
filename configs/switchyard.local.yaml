# Switchyard Configuration — Local Whisper ASR flavor
#
# Uses ahmetoner/whisper-asr-webservice running on nadznas:9300
# and a local LLM (Ollama) for interpretation.
#
# Usage:
#   cp configs/switchyard.local.yaml switchyard.yaml
#   switchyard

server:
  health_port: 8081

transports:
  grpc:
    enabled: true
    port: 50051
  http:
    enabled: true
    port: 8080
  mqtt:
    enabled: false
    broker: "tcp://localhost:1883"
    topic: "switchyard/#"

interpreter:
  backend: "local"
  local:
    # ahmetoner/whisper-asr-webservice — POST /asr endpoint
    whisper_endpoint: "http://nadznas:9300/asr"
    whisper_type: "asr"              # "asr" = whisper-asr-webservice, "openai" = OpenAI-compatible
    vad_filter: true                 # Filter out silence / non-speech segments
    language: ""                     # Default language (ISO-639-1); leave empty for auto-detect. use en for better performance if you know the language in advance.

    # Ollama for command interpretation
    llm_endpoint: "http://localhost:11434/api/generate"

tts:
  enabled: true                      # Enable text-to-speech synthesis
  backend: "piper"                   # "piper" (Wyoming protocol)
  piper:
    endpoint: "localhost:10200"      # Fallback Wyoming TCP endpoint (override via SWITCHYARD_TTS_PIPER_ENDPOINT)
    endpoints:                       # Per-language Piper endpoints (override via SWITCHYARD_TTS_PIPER_ENDPOINTS_EN, etc.)
      en: "localhost:10200"          #   English — dedicated Piper instance
      fr: "localhost:10201"          #   French  — dedicated Piper instance
    voices:
      en: "en_US-lessac-medium"
      fr: "fr_FR-siwis-medium"
      es: "es_ES-mls_10246-low"

targets:
  homeassistant:
    endpoint: "http://homeassistant.local:8123/api/services"
    protocol: "http"
    token: "${HA_TOKEN}"

logging:
  level: "debug"
  format: "text"
