# Switchyard Configuration
# Copy this file to ./switchyard.yaml or /etc/switchyard/switchyard.yaml
# Environment variables can be referenced as ${VAR_NAME}

server:
  health_port: 8081

transports:
  grpc:
    enabled: true
    port: 50051
  http:
    enabled: true
    port: 8080
  mqtt:
    enabled: false
    broker: "tcp://localhost:1883"
    topic: "switchyard/#"

interpreter:
  backend: "openai"                  # "openai" | "local"
  openai:
    api_key: "${OPENAI_API_KEY}"
    transcription_model: "gpt-4o-transcribe"
    completion_model: "gpt-4o"
  local:
    whisper_endpoint: "http://localhost:8000/v1/audio/transcriptions"
    whisper_type: "openai"           # "openai" (whisper.cpp/faster-whisper) | "asr" (ahmetoner/whisper-asr-webservice)
    vad_filter: false                # VAD filtering (asr type only)
    language: ""                     # Default language ISO-639-1 (empty = auto-detect)
    llm_endpoint: "http://localhost:11434/api/generate"
    llm_model: "llama3"              # Ollama model name (e.g., "llama3.2:1b")

tts:
  enabled: false                     # Enable text-to-speech synthesis
  backend: "piper"                   # "piper" (Wyoming protocol)
  piper:
    endpoint: "localhost:10200"      # Fallback Wyoming TCP endpoint (all languages)
    endpoints:                       # Per-language Piper endpoints (takes precedence)
      en: "localhost:10200"          #   English — dedicated Piper instance
      fr: "localhost:10201"          #   French  — dedicated Piper instance
    voices:                          # ISO-639-1 → Piper voice model overrides
      en: "en_US-lessac-medium"
      fr: "fr_FR-siwis-medium"
      es: "es_ES-mls_10246-low"

targets:
  homeassistant:
    endpoint: "http://homeassistant.local:8123/api/services"
    protocol: "http"
    token: "${HA_TOKEN}"
  robot:
    endpoint: "robot.local:50052"
    protocol: "grpc"
    token: ""

logging:
  level: "info"                      # debug | info | warn | error
  format: "json"                     # json | text
